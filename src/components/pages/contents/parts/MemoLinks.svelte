<script lang="ts">
    import { myStudent, viewMemoCard } from "../../../../lib/store/memoStore";
    let showDateList = false;
    let showStudentList = false;
    let showMemoList = false;
  
    // ë‚ ì§œ í¬ë§· ë³€í™˜ í•¨ìˆ˜
    const formatDate = (date: Date) => {
      return new Date(date).toLocaleString("ko-KR", {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit",
      });
    };
  </script>
  
  <div class="flex gap-6 text-lg">
    <!-- ë‚ ì§œ -->
    {#if $viewMemoCard.dateTimeLink.length > 0}
      <div class="flex items-center cursor-pointer" on:click={() => showDateList = !showDateList}>
        ğŸ“… <span class="ml-1">({$viewMemoCard.dateTimeLink.length})</span>
      </div>
    {/if}
  
    <!-- í•™ìƒ -->
    {#if $viewMemoCard.studentLink.length > 0}
      <div class="flex items-center cursor-pointer" on:click={() => showStudentList = !showStudentList}>
        ğŸ‘¤ <span class="ml-1">({$viewMemoCard.studentLink.length})</span>
      </div>
    {/if}
  
    <!-- ë©”ëª¨ -->
    {#if $viewMemoCard.memoLink.length > 0}
      <div class="flex items-center cursor-pointer" on:click={() => showMemoList = !showMemoList}>
        ğŸ”— <span class="ml-1">({$viewMemoCard.memoLink.length})</span>
      </div>
    {/if}
  </div>
  
  <!-- ë‚ ì§œ ìƒì„¸ ë¦¬ìŠ¤íŠ¸ -->
  {#if showDateList}
    <div class="mt-2 bg-card p-3 rounded">
      <h3 class="text-lg font-semibold text-main">ğŸ“… ì–¸ê¸‰ëœ ë‚ ì§œ</h3>
      <ul class="text-default text-sm list-disc pl-5">
        {#each $viewMemoCard.dateTimeLink as date}
          <li>{formatDate(date)}</li>
        {/each}
      </ul>
    </div>
  {/if}
  
  <!-- í•™ìƒ ìƒì„¸ ë¦¬ìŠ¤íŠ¸ -->
  {#if showStudentList}
    <div class="mt-2 bg-card p-3 rounded">
      <h3 class="text-lg font-semibold text-main">ğŸ‘¤ ì–¸ê¸‰ëœ í•™ìƒ</h3>
      <ul class="text-default text-sm list-disc pl-5">
        {#each $viewMemoCard.studentLink as studentId}
          <li>{$myStudent[studentId] || `í•™ìƒ ID: ${studentId}`}</li>
        {/each}
      </ul>
    </div>
  {/if}
  